<!doctype html>
<html lang="en">    
<head>
         <meta charset="utf-8"/>

    <!--

        EVERYTHING IS PHYSICAL 
        EVERYTHING IS FRACTAL
        EVERYTHING IS RECURSIVE
        NO MONEY 
        MO MINING 
        NO PROPERTY
        LOOK AT THE INSECTS
        LOOK AT THE FUNGI
        LANGUAGE IS HOW THE MIND PARSES REALITY

    -->

    <!--Stop Google:-->

    <META NAME="robots" CONTENT="noindex,nofollow">

    <script src="jscode/geometron.js"></script>

<link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAA/wAAAAD/AAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAiIAAAAAARAAIAAAAAABEAAgAAAAAAABACAAAAAAAAAQIAAAAAAwAAEgAAADAzMzMwMzMzMwMAAAIQAAAwAAAAAgEAAAAAAAACABAAAAAAAAIAAQAAAAAAAgAAEQAAAAACAAARAAAAACIgAAAAAAAAAgAAAAD+/wAA/H8AAM7/AADO/wAA9v8AAPr/AAC8/QAAAAAAAL59AAD+vwAA/t8AAP7vAAD+8wAA/vMAAPx/AAD+/wAA" rel="icon" type="image/x-icon" />

<script src="https://cdn.jsdelivr.net/npm/x3dom@1.7.2/x3dom.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/x3dom@1.7.2/x3dom.css">

</head>
<body> 

    <!--
    geometron 3d for trash robot voxel programming
        symbol.html:

        this is a custom language, specific to this node in the Universe of Things.  Hypercube BUILDS languages. This is apure implementation of 
        ONE language, with absolute minimum number of actions, cleaned up glyphs, large and simple buttons, just a few.
    
    -->

<div id = "square">
    <x3d id = "mainx3d">
        <scene id = "main">
        </scene>
    </x3d>
</div>

<div id = "spellcanvasbox">
    <canvas id = "spellcanvas"></canvas>
</div>

<script>


if(innerWidth > innerHeight){
    document.getElementById("square").style.width = innerHeight.toString() +  "px";
    document.getElementById("square").style.height = innerHeight.toString() +  "px";    
}
else{
    document.getElementById("square").style.width = innerWidth.toString() +  "px";
    document.getElementById("square").style.height = innerWidth.toString() +  "px";    
}

mainGVM = new GVM(document.getElementById("spellcanvas"),300,300);
mainGVM.x0 = 5;
mainGVM.y0 = 25;
mainGVM.unit = 20;
mainGVM.glyph = "0720,0740,0730,0721,0740,0730,0722,0740,0730,0723,0740,0730,0724,0740,0730,0725,0740,0732,0720,0741,0732,0721,0741,0732,0722,0741,0732,0723,0741,0732,0724,0741,0732,0725,0741,0732,0207,";

x = 0.0;
y = 0.0;
z = 0.0;
side = 0.25;
solidColor = "1 0 0";
currentTrans = 0.0;
main = document.getElementById("main");


var httpcHypercube = new XMLHttpRequest();
httpcHypercube.onreadystatechange = function(){
    if (this.readyState == 4 && this.status == 200) {
        hypercube = JSON.parse(this.responseText);
        mainGVM.importbytecode(hypercube);    
        redraw();
    }
};
httpcHypercube.open("GET", "fileloader.php?filename=data/hypercube.txt", true);
httpcHypercube.send();



function redraw(){
    main.innerHTML = "";
    x = 0.0;
    y = 0.0;
    z = 0.0;
    drawGlyph(mainGVM.glyph);
    
}


function drawGlyph(localString){
    var tempArray = localString.split(',');
    for(var index = 0;index < tempArray.length;index++){
        action(parseInt(tempArray[index],8));
    }
}

function action(localCommand){

    if(localCommand == 0207){
        drawcursor();
    }

    if(localCommand == 0720){
        //red
        solidColor = "1 0 0";
    }
    if(localCommand == 0721){
        //orange
        solidColor = "1 0.5 0";
    }
    if(localCommand == 0722){
        solidColor = "1 1 0";
        //yellow
    }
    if(localCommand == 0723){
        //green
        solidColor = "0 1 0";
    }
    if(localCommand == 0724){
        //blue
        solidColor = "0 0 1";
    }
    if(localCommand == 0725){
        //purple
        solidColor = "1 0 1";
    }


    if(localCommand == 0730){
        x += side;
    }
    if(localCommand == 0731){
        x -= side;
    }
    if(localCommand == 0732){
        y += side;
    }
    if(localCommand == 0733){
        y -= side;
    }
    if(localCommand == 0734){
        z += side;
    }
    if(localCommand == 0735){
        z -= side;
    }
    if(localCommand == 0736){
        side /= 2;
    }
    if(localCommand == 0737){
        side *= 2;
    }

    if(localCommand == 0740){
        drawsphere();
    }
    if(localCommand == 0741){
        drawcube();
    }
    
    if(localCommand == 0742){
//draw cylinder x
    }
    if(localCommand == 0743){
//draw cylinder y
    }
    if(localCommand == 0744){
//draw cylinder z
    }


}



function drawsphere(){
    var news = document.createElement("shape");
    var newt = document.createElement("transform");
    main.appendChild(newt);
    newt.setAttribute("translation",x.toString() + " " + y.toString() + " " + z.toString() );
    var newt2 = document.createElement("transform");
    newt.appendChild(newt2);
    newt2.setAttribute("scale",(side).toString() + " " + (side).toString() + " " + (side).toString());
    newt2.appendChild(news);
    var newa = document.createElement("appearance");
    news.appendChild(newa);
    var newm = document.createElement("material");
    newm.setAttribute("diffuseColor",solidColor);
    newm.setAttribute("transparency",currentTrans);
    newa.appendChild(newm);
    var newb = document.createElement("sphere");
    news.appendChild(newb);
}

function drawcube(){
    var news = document.createElement("shape");
    var newt = document.createElement("transform");
    main.appendChild(newt);
    newt.setAttribute("translation",x.toString() + " " + y.toString() + " " + z.toString() );
    var newt2 = document.createElement("transform");
    newt.appendChild(newt2);
    newt2.setAttribute("scale",(0.5*side).toString() + " " + (0.5*side).toString() + " " + (0.5*side).toString());
    newt2.appendChild(news);
    var newa = document.createElement("appearance");
    news.appendChild(newa);
    var newm = document.createElement("material");
    newm.setAttribute("diffuseColor",solidColor);
    newm.setAttribute("transparency",currentTrans);
    newa.appendChild(newm);
    var newb = document.createElement("box");
    news.appendChild(newb);    
}

function drawcursor(){
    var news = document.createElement("shape");
    var newt = document.createElement("transform");
    main.appendChild(newt);
    newt.setAttribute("translation",x.toString() + " " + y.toString() + " " + z.toString() );
    var newt2 = document.createElement("transform");
    newt.appendChild(newt2);
    newt2.setAttribute("scale",(side).toString() + " " + (side).toString() + " " + (side).toString());
    newt2.appendChild(news);
    var newa = document.createElement("appearance");
    news.appendChild(newa);
    var newm = document.createElement("material");
    newm.setAttribute("diffuseColor","0 0 1");
    newm.setAttribute("transparency","0.85");
    newa.appendChild(newm);
    var newb = document.createElement("box");
    news.appendChild(newb);
}


</script>
<style>
body{
    overflow:hidden;
}
input{
    font-family:courier;
}
#square{
    position:absolute;
    left:0px;
    top:0px;
    border:solid;
    border-width:0.1px;
    border-color:blue;
    overflow:hidden;
    width:500px;
    height:500px;
}
#maincanvas{
    border:solid;
}
#spellcanvas{
    border:solid;
}
#actioninput{
    width:1em;
}

.button:hover{
    background-color:green;
}
.button:active{
    background-color:yellow;
}
.button{
    cursor:pointer;
}

#mainx3d{
    position:absolute;
    left:0px;
    top:0px;
    right:0px;
    bottom:0px;
    background-color:grey;
}
#spellcanvasbox{
    position:absolute;
    right:0px;
    top:100px;
    width:300px;
    height:300px;
}
</style>
</body>
</html>