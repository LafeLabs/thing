<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!--

        EVERYTHING IS PHYSICAL 
        EVERYTHING IS FRACTAL
        EVERYTHING IS RECURSIVE
        NO MONEY 
        MO MINING 
        NO PROPERTY
        LOOK AT THE INSECTS
        LOOK AT THE FUNGI
        LANGUAGE IS HOW THE MIND PARSES REALITY

    
    -->
    
    <link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAA/wAAAAD//wAA/wAAAAD/AP8A/wAApv8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFUAAARGAAIxFVUABEYAAjMRFQAARGYiIjMRAABERmZiIzEAAARERGZiMwAAAARERGYiAAAAAABERiL4PwAA+78AAPu/AAD33wAA9V8AAPVfAAD1XwAA998AAOADAADhAAAA4AAAAPAAAADwAAAA+AAAAP4AAAD/wAAA" rel="icon" type="image/x-icon" />
    
    <!--Stop Google:-->
    <META NAME="robots" CONTENT="noindex,nofollow">
<!--geometron javascript library-->
    <script src="jscode/geometron.js"></script>

</head>
<body>
<div id = "header">
<input id = "urlinput"/>
<h2 style = "display:inline">TRASH ROBOT #trashrobot #geometron</h2>
</div>


<div id = "feed"></div>


<div id = "footer">
</div>
<script>
feedElement = {
    "glyph": "0321,0341,0332,0337,0341,0333,0341,",
    "image": {
        "src": "",
        "w": 1.0,
        "angle": 0,
        "x": 0.0,
        "y": 0.0
    }
};


feedwidth = innerWidth - 100;
feedlinkwidth  = feedwidth;


feed = [];
hypercube = [];

var httpcHypercube = new XMLHttpRequest();
httpcHypercube.onreadystatechange = function(){
    if (this.readyState == 4 && this.status == 200) {
        hypercube = JSON.parse(this.responseText);
        var httpcFeed = new XMLHttpRequest();
        httpcFeed.onreadystatechange = function(){
            if (this.readyState == 4 && this.status == 200) {
                feed = JSON.parse(this.responseText);
                if(feed.length == 0){
                    feed.push(feedElement);
                }
                loadfeed();
            }
        };
        httpcFeed.open("GET", "fileloader.php?filename=data/feed.txt", true);
        httpcFeed.send();

    }
};
httpcHypercube.open("GET", "fileloader.php?filename=data/hypercube.txt", true);
httpcHypercube.send();



function loadfeed(){
    gvmArray = [];
    document.getElementById("feed").innerHTML = "";
    for(var index = 0;index < feed.length;index++){
        var newdiv = document.createElement("DIV");
        var newcan = document.createElement("CANVAS");
        newcan.className = "feedcan";
        newdiv.style.marginTop = 0.05*feedwidth + "px";
        newdiv.style.marginBottom = 0.05*feedwidth + "px";
        newdiv.appendChild(newcan);
        newdiv.className = "feedelement";
        document.getElementById("feed").appendChild(newdiv);
        var newGVM = new GVM(newcan,feedlinkwidth,feedlinkwidth);
        newGVM.importbytecode(hypercube);
        gvmArray.push(newGVM);
        newGVM.drawGlyph(feed[index].glyph);    
        
        var newimg = document.createElement("IMG");
        newimg.src = feed[index].image.src;
        newdiv.appendChild(newimg);
        newimg.className = "feedimage";
        newimg.style.width = (feed[index].image.w*feedlinkwidth).toString() + "px";
        newimg.style.left = (feed[index].image.x*feedlinkwidth).toString() + "px";
        newimg.style.top = (feed[index].image.y*feedlinkwidth).toString() + "px";
        newimg.style.transform = "rotate(" + feed[index].image.angle.toString() + "deg)";
        newdiv.id = "fd" + index.toString();
    }    
}

document.getElementById("urlinput").value = "";
document.getElementById("urlinput").onchange = function(){
    feedurl = this.value;
    var httpcFeed = new XMLHttpRequest();
    httpcFeed.onreadystatechange = function(){
        if (this.readyState == 4 && this.status == 200) {
            feed = JSON.parse(this.responseText);
            loadfeed();
        }
    };
    httpcFeed.open("GET", "fileloader.php?filename=" + feedurl, true);
    httpcFeed.send();    
}

</script>
<style>
.uploadimage{
    max-width:50%;
}

#feed{
    position:absolute;
    left:0px;
    bottom:0px;
    right:0px;
    top:80px;
    overflow:scroll;
}

#header{
    font-size:12px;
    height:80px;
    background-color:black;
    color:#00ff00;
    font-family:courier;
    position:absolute;
    left:0px;
    right:0px;
    top:0px;
}
.feedelement{
    margin-top:100px;
    margin:auto;
    border:solid;
    overflow:hidden;
}
.feedcan{
    position:absolute;
    
}
.feedimage{
    position:relative;
    z-index:-1;
}
#urlinput{
    position:absoolute;
    left:2px;
    top:2px;
    width:30%;
    color:#00ff00;
    background-color:black;
    font-size:26px;
    font-family:courier;
    border:solid;
    border-color:#ed5db7;
}
</style>
</body>
</html>